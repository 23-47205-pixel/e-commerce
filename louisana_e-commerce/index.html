<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxora - Elite Fashion</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #6C63FF;
            --secondary: #A8A3FF;
            --accent: #8A84FF;
            --dark: #2D2D2D;
            --light: #F5F7FF;
            --gray: #6c757d;
            --blue: #E3E9FF;
            --dark-blue: #5D58D5;
            --text: #2D2D2D;
        }

        body {
            background-color: #f8fbff;
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header Styles */
        header {
            background-color: var(--dark);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(45, 45, 45, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: var(--secondary);
            font-size: 1.8rem;
        }

        .logo h1 {
            font-size: 1.8rem;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
            align-items: center;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        nav a:hover {
            color: var(--secondary);
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* MODERN LOGIN PAGE STYLES */
        .login-container {
            display: flex;
            min-height: 100vh;
            background: linear-gradient(135deg, #F5F7FF 0%, #E3E9FF 100%);
            padding: 1rem;
            align-items: center;
            justify-content: center;
        }

        .login-card {
            display: flex;
            width: 100%;
            max-width: 1000px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(108, 99, 255, 0.1);
            overflow: hidden;
            min-height: 600px;
        }

        .login-illustration {
            flex: 1;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .login-illustration::before {
            content: '';
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            top: -50px;
            right: -50px;
        }

        .login-illustration::after {
            content: '';
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            bottom: -50px;
            left: -50px;
        }

        .illustration-img {
            width: 80%;
            max-width: 350px;
            margin-bottom: 2rem;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2));
            border-radius: 10px;
        }

        .illustration-text {
            text-align: center;
            z-index: 1;
            position: relative;
        }

        .illustration-text h2 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .illustration-text p {
            font-size: 1rem;
            opacity: 0.9;
        }

        .login-form-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 3rem;
        }

        .form-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .form-header h2 {
            color: var(--dark);
            font-size: 2rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-header p {
            color: var(--gray);
            font-size: 1rem;
        }

        .user-type-selector {
            display: flex;
            margin-bottom: 1.5rem;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #e1e5e9;
            background: #f8f9fa;
        }

        .user-type {
            flex: 1;
            text-align: center;
            padding: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
            background: transparent;
            font-weight: 500;
            color: var(--gray);
        }

        .user-type.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 10px rgba(108, 99, 255, 0.3);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 0.9rem 1rem;
            border: 1px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            background: #f8f9fa;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1);
            background: white;
        }

        .password-requirement {
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 0.25rem;
        }

        .password-error {
            color: #dc3545;
            font-size: 0.8rem;
            margin-top: 0.25rem;
        }

        .login-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.9rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3);
        }

        .login-btn:hover {
            background: var(--dark-blue);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(108, 99, 255, 0.4);
        }

        .register-link {
            text-align: center;
            margin-top: 1.5rem;
        }

        .register-link a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
        }

        .register-link a:hover {
            text-decoration: underline;
        }

        .register-form {
            display: none;
        }

        .register-form.active {
            display: block;
        }

        /* Dashboard Styles */
        .dashboard {
            min-height: 100vh;
            display: flex;
            background-color: var(--light);
        }

        .sidebar {
            width: 250px;
            background: var(--dark);
            color: white;
            padding: 1.5rem;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 100;
        }

        .sidebar h3 {
            margin-bottom: 1rem;
            color: var(--secondary);
            text-align: center;
        }

        .sidebar ul {
            list-style: none;
        }

        .sidebar li {
            margin-bottom: 0.5rem;
        }

        .sidebar a {
            color: white;
            text-decoration: none;
            display: block;
            padding: 0.75rem;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .sidebar a:hover, .sidebar a.active {
            background: rgba(255,255,255,0.1);
        }

        .dashboard-content {
            flex: 1;
            margin-left: 250px;
            padding: 1.5rem;
            transition: margin-left 0.3s ease;
            background-color: var(--light);
        }

        .section-title {
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--secondary);
            color: var(--dark);
        }

        /* Menu Items Styles */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .menu-item {
            border: 1px solid var(--secondary);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            background: white;
            position: relative;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(108, 99, 255, 0.2);
        }

        .menu-item img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            cursor: pointer;
        }

        .menu-item-content {
            padding: 1rem;
        }

        .menu-item h3 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .menu-item p {
            color: var(--text);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .menu-item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price {
            font-weight: bold;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .add-to-cart {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .add-to-cart:hover {
            background: var(--dark-blue);
        }

        /* Product Details Page Styles */
        .product-details {
            display: none;
        }

        .product-details.active {
            display: block;
        }

        .product-details-container {
            display: flex;
            gap: 2rem;
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);
        }

        .product-image {
            flex: 1;
            max-width: 500px;
        }

        .product-image img {
            width: 100%;
            border-radius: 10px;
            object-fit: cover;
        }

        .product-info {
            flex: 1;
        }

        .product-info h2 {
            color: var(--dark);
            margin-bottom: 1rem;
        }

        .product-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .product-description {
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .size-selector {
            margin-bottom: 1.5rem;
        }

        .size-selector h4 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .size-options {
            display: flex;
            gap: 0.5rem;
        }

        .size-option {
            padding: 0.5rem 1rem;
            border: 1px solid var(--secondary);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .size-option:hover {
            background: var(--light);
        }

        .size-option.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .product-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .back-to-products {
            background: var(--gray);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .back-to-products:hover {
            background: #5a6268;
        }

        /* Cart Styles */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid var(--secondary);
        }

        .cart-item-details {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cart-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
        }

        .cart-item-info h4 {
            margin-bottom: 0.5rem;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            background: var(--light);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .remove-btn {
            background: #f8d7da;
            color: #721c24;
            border: none;
            padding: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .remove-btn:hover {
            background: #f1b0b7;
        }

        .cart-summary {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 2px solid var(--secondary);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .summary-total {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--dark);
        }

        .checkout-btn {
            margin-top: 1rem;
            background: var(--accent);
            width: 100%;
        }

        .checkout-btn:hover {
            background: var(--dark-blue);
        }

        /* Payment Options */
        .payment-options {
            margin-top: 2rem;
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);
        }

        .payment-option {
            margin-bottom: 1rem;
            padding: 1rem;
            border: 1px solid var(--secondary);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-option:hover {
            background: var(--light);
        }

        .payment-option.selected {
            border-color: var(--accent);
            background: #e6f2ff;
        }

        .payment-option input {
            margin-right: 10px;
        }

        .reference-input {
            margin-top: 1rem;
            display: none;
        }

        .reference-input.show {
            display: block;
        }

        /* Order History Styles */
        .order-card {
            border: 1px solid var(--secondary);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            background: white;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .order-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status-confirmed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-preparing {
            background: #fff3cd;
            color: #856404;
        }

        .status-ready {
            background: #d4edda;
            color: #155724;
        }

        .status-pickedup {
            background: #cce7ff;
            color: #004085;
        }

        .status-delivered {
            background: #e2e3e5;
            color: #383d41;
        }

        .status-completed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .status-failed {
            background: #f5c6cb;
            color: #721c24;
        }

        .order-items {
            margin-bottom: 1rem;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        /* Enhanced Order Status Tracking */
        .order-tracking {
            margin: 1.5rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .tracking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .tracking-title {
            font-weight: 600;
            color: var(--dark);
        }

        .tracking-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin: 2rem 0;
        }

        .tracking-steps::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: #ddd;
            z-index: 1;
        }

        .tracking-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .step-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 2px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
            transition: all 0.3s;
        }

        .step-label {
            font-size: 0.8rem;
            text-align: center;
            color: var(--gray);
        }

        .step-active .step-icon {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .step-completed .step-icon {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .step-completed .step-label {
            color: var(--text);
            font-weight: 500;
        }

        .step-active .step-label {
            color: var(--dark);
            font-weight: 600;
        }

        .tracking-info {
            margin-top: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 5px;
            border-left: 4px solid var(--accent);
        }

        .tracking-message {
            font-size: 0.9rem;
            color: var(--text);
        }

        .estimated-time {
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* Staff Dashboard Styles */
        .orders-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);
        }

        .orders-table th, .orders-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--secondary);
        }

        .orders-table th {
            background: var(--light);
            font-weight: 600;
        }

        .action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-right: 0.5rem;
            transition: all 0.3s;
        }

        .btn-confirmed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .btn-confirmed:hover {
            background: #bee5eb;
        }

        .btn-preparing {
            background: #fff3cd;
            color: #856404;
        }

        .btn-preparing:hover {
            background: #ffeaa7;
        }

        .btn-ready {
            background: #d4edda;
            color: #155724;
        }

        .btn-ready:hover {
            background: #c3e6cb;
        }

        .btn-pickedup {
            background: #cce7ff;
            color: #004085;
        }

        .btn-pickedup:hover {
            background: #a8d4ff;
        }

        .btn-delivered {
            background: #e2e3e5;
            color: #383d41;
        }

        .btn-delivered:hover {
            background: #d6d8db;
        }

        .btn-completed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .btn-completed:hover {
            background: #bee5eb;
        }

        .btn-cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .btn-cancelled:hover {
            background: #f1b0b7;
        }

        .btn-failed {
            background: #f5c6cb;
            color: #721c24;
        }

        .btn-failed:hover {
            background: #f1b0b7;
        }

        /* Admin Dashboard Styles */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid var(--secondary);
            margin-bottom: 1.5rem;
        }

        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            border-bottom: 2px solid var(--dark);
            font-weight: 600;
        }

        .tab:hover {
            background: var(--light);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Form Styles for Admin */
        .admin-form {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);
        }

        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row .form-group {
            flex: 1;
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            background: var(--dark);
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 5px;
            z-index: 1000;
            cursor: pointer;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .dashboard {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: fixed;
                transform: translateX(-100%);
                z-index: 999;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .dashboard-content {
                margin-left: 0;
                padding-top: 4rem;
            }
            
            .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .admin-stats {
                grid-template-columns: 1fr 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }

            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .cart-item-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .form-row {
                flex-direction: column;
            }

            .order-header {
                flex-direction: column;
                gap: 0.5rem;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1;
                min-width: 120px;
                text-align: center;
            }

            .orders-table {
                font-size: 0.9rem;
            }

            .orders-table th, .orders-table td {
                padding: 0.5rem;
            }

            /* Product Details Responsive */
            .product-details-container {
                flex-direction: column;
            }

            .product-image {
                max-width: 100%;
            }

            /* Enhanced Order Tracking Responsive */
            .tracking-steps {
                flex-wrap: wrap;
                gap: 1rem;
            }

            .tracking-step {
                flex: 0 0 calc(50% - 0.5rem);
                margin-bottom: 1rem;
            }

            .tracking-steps::before {
                display: none;
            }

            /* Login Page Responsive */
            .login-card {
                flex-direction: column;
                max-width: 500px;
            }

            .login-illustration {
                padding: 1.5rem;
            }

            .login-form-section {
                padding: 2rem;
            }
        }

        @media (max-width: 480px) {
            .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .cart-item-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .form-row {
                flex-direction: column;
            }

            .btn {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }

            .action-btn {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
                margin-right: 0.25rem;
            }

            .orders-table {
                font-size: 0.8rem;
            }

            .orders-table th, .orders-table td {
                padding: 0.4rem;
            }

            /* Product Actions Responsive */
            .product-actions {
                flex-direction: column;
            }

            /* Enhanced Order Tracking Responsive */
            .tracking-step {
                flex: 0 0 100%;
            }
        }

        /* Page Styles */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Add to Cart Animation */
        @keyframes addToCart {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .add-to-cart-animation {
            animation: addToCart 0.5s ease;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--accent);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Logout Button Styling */
        .logout-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
            width: 100%;
            justify-content: center;
        }

        .logout-btn:hover {
            background: var(--dark-blue);
        }

        /* Register Form Styles */
        .register-form {
            display: none;
        }

        .register-form.active {
            display: block;
        }

        /* Checkout Page Styles */
        .checkout-page {
            display: none;
        }

        .checkout-page.active {
            display: block;
        }

        .order-confirmation {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            margin-top: 2rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);
        }

        .confirmation-icon {
            font-size: 4rem;
            color: var(--accent);
            margin-bottom: 1rem;
        }

        /* Staff Header */
        .staff-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .staff-actions {
            display: flex;
            gap: 1rem;
        }

        /* Delivery Options */
        .delivery-options {
            margin-top: 2rem;
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);
        }

        .delivery-option {
            margin-bottom: 1rem;
            padding: 1rem;
            border: 1px solid var(--secondary);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .delivery-option:hover {
            background: var(--light);
        }

        .delivery-option.selected {
            border-color: var(--accent);
            background: #e6f2ff;
        }

        .delivery-option input {
            margin-right: 10px;
        }

        .delivery-fee {
            font-weight: bold;
            color: var(--primary);
        }

        /* Image Upload Styles */
        .image-upload {
            margin-bottom: 1rem;
        }

        .image-preview {
            width: 100%;
            max-width: 200px;
            height: 150px;
            border: 1px dashed var(--secondary);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }

        /* Admin Table Styles */
        .admin-table-container {
            overflow-x: auto;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);
        }

        .admin-table th, .admin-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--secondary);
            white-space: nowrap;
        }

        .admin-table th {
            background: var(--light);
            font-weight: 600;
        }

        /* File Upload Styles */
        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-upload input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-label {
            display: block;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-upload-label:hover {
            background: var(--light);
        }
    </style>
</head>
<body>
    <!-- Header for Customer Dashboard -->
    <header id="customer-header" class="page">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-tshirt"></i>
                    <h1>Luxora - Elite Fashion</h1>
                </div>
                <nav>
                    <ul>
                        <li class="cart-icon" id="header-cart">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count">0</span>
                        </li>
                        <li>
                            <button class="logout-btn" id="customer-header-logout" style="width: auto; padding: 0.5rem 1rem;">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobile-menu-toggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Login Page -->
    <div id="login-page" class="page active">
        <div class="login-container">
            <div class="login-card">
                <div class="login-illustration">
                    <!-- YOUR IMAGE ADDED HERE -->
                    <img src="https://i.pinimg.com/736x/a3/9f/35/a39f35742318e85a91dced1971cf45ad.jpg" alt="Luxora Fashion" class="illustration-img">
                    <div class="illustration-text">
                        <h2>Welcome to Luxora</h2>
                        <p>Elite Fashion for Everyone</p>
                    </div>
                </div>
                <div class="login-form-section">
                    <div class="form-header">
                        <h2>Welcome Back</h2>
                        <p>Please sign in to your account</p>
                    </div>
                    <div class="user-type-selector">
                        <div class="user-type active" data-type="customer">Customer</div>
                        <div class="user-type" data-type="staff">Staff</div>
                        <div class="user-type" data-type="admin">Admin</div>
                    </div>
                    
                    <!-- Login Form -->
                    <form id="login-form">
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" class="form-control" placeholder="Enter your username" required>
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
                        </div>
                        <button type="submit" class="login-btn">Sign In</button>
                    </form>
                    
                    <!-- Register Form (Only for Customers) -->
                    <div class="register-form" id="customer-register-form">
                        <div class="form-header">
                            <h2>Create Account</h2>
                            <p>Join our fashion community</p>
                        </div>
                        <form id="register-form">
                            <div class="form-group">
                                <label for="reg-username">Username</label>
                                <input type="text" id="reg-username" class="form-control" placeholder="Choose a username" required>
                            </div>
                            <div class="form-group">
                                <label for="reg-email">Email</label>
                                <input type="email" id="reg-email" class="form-control" placeholder="Enter your email" required>
                            </div>
                            <div class="form-group">
                                <label for="reg-password">Password</label>
                                <input type="password" id="reg-password" class="form-control" placeholder="Create a password" required>
                                <div class="password-requirement">Password must be at least 8 characters and contain letters and numbers</div>
                                <div class="password-error" id="password-error"></div>
                            </div>
                            <div class="form-group">
                                <label for="reg-confirm-password">Confirm Password</label>
                                <input type="password" id="reg-confirm-password" class="form-control" placeholder="Confirm your password" required>
                            </div>
                            <button type="submit" class="login-btn">Create Account</button>
                        </form>
                        <div class="register-link">
                            <p>Already have an account? <a href="#" id="show-login">Sign in here</a></p>
                        </div>
                    </div>
                    
                    <div class="register-link" id="login-register-link">
                        <p>Don't have an account? <a href="#" id="show-register">Register here</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Customer Dashboard -->
    <div id="customer-dashboard" class="page">
        <div class="dashboard">
            <div class="sidebar" id="customer-sidebar">
                <h3>Customer Menu</h3>
                <ul>
                    <li><a href="#" class="sidebar-link active" data-page="customer-home">Home</a></li>
                    <li><a href="#" class="sidebar-link" data-page="customer-menu">Catalog</a></li>
                    <li><a href="#" class="sidebar-link" data-page="customer-cart">Cart</a></li>
                    <li><a href="#" class="sidebar-link" data-page="customer-orders">Order History</a></li>
                    <li><a href="#" class="sidebar-link" data-page="customer-about">About Us</a></li>
                    <li><a href="#" class="sidebar-link" data-page="customer-mission">Mission & Vision</a></li>
                </ul>
                <button class="logout-btn" id="customer-logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
            <div class="dashboard-content">
                <!-- Customer Home -->
                <div id="customer-home" class="customer-page active">
                    <h2 class="section-title">Welcome to Luxora - Elite Fashion!</h2>
                    <div class="welcome-banner" style="background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem; text-align: center;">
                        <h2>Elite Fashion For Everyone</h2>
                        <p>Discover the latest trends in clothing and accessories for all styles and occasions</p>
                    </div>
                    
                    <h3 class="section-title">Our Featured Collection</h3>
                    <div class="menu-grid" id="menu-items">
                        <!-- Menu items will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Customer Menu -->
                <div id="customer-menu" class="customer-page">
                    <h2 class="section-title">Our Clothing Catalog</h2>
                    <div class="menu-grid" id="menu-items-full">
                        <!-- Full menu items will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Product Details Page -->
                <div id="product-details" class="customer-page product-details">
                    <div class="product-details-container" id="product-details-container">
                        <!-- Product details will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Customer Cart -->
                <div id="customer-cart" class="customer-page">
                    <h2 class="section-title">Your Cart</h2>
                    <div id="cart-items">
                        <!-- Cart items will be populated by JavaScript -->
                    </div>
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="cart-subtotal">₱0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Shipping Fee:</span>
                            <span id="shipping-fee">₱0.00</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span>Total:</span>
                            <span id="cart-total">₱0.00</span>
                        </div>
                        <button class="btn checkout-btn" id="checkout-btn">Proceed to Checkout</button>
                    </div>
                </div>

                <!-- Checkout Page -->
                <div id="customer-checkout" class="customer-page checkout-page">
                    <h2 class="section-title">Checkout</h2>
                    <div class="order-summary">
                        <h3>Order Summary</h3>
                        <div id="checkout-items">
                            <!-- Checkout items will be populated by JavaScript -->
                        </div>
                        <div class="cart-summary">
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="checkout-subtotal">₱0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Shipping Fee:</span>
                                <span id="checkout-shipping">₱0.00</span>
                            </div>
                            <div class="summary-row summary-total">
                                <span>Total:</span>
                                <span id="checkout-total">₱0.00</span>
                            </div>
                        </div>
                    </div>

                    <div class="delivery-options">
                        <h3>Select Delivery Method</h3>
                        <div class="delivery-option" data-method="pickup">
                            <input type="radio" id="pickup" name="delivery" value="pickup">
                            <label for="pickup">Pickup at Store</label>
                            <span class="delivery-fee">₱0.00</span>
                        </div>
                        <div class="delivery-option" data-method="grab">
                            <input type="radio" id="grab" name="delivery" value="grab">
                            <label for="grab">Grab Delivery</label>
                            <span class="delivery-fee">₱50.00</span>
                        </div>
                        <div class="delivery-option" data-method="foodpanda">
                            <input type="radio" id="foodpanda" name="delivery" value="foodpanda">
                            <label for="foodpanda">FoodPanda Delivery</label>
                            <span class="delivery-fee">₱50.00</span>
                        </div>
                    </div>

                    <div class="payment-options">
                        <h3>Select Payment Method</h3>
                        <div class="payment-option" data-method="cash">
                            <input type="radio" id="cash" name="payment" value="cash">
                            <label for="cash">Cash on Delivery</label>
                        </div>
                        <div class="payment-option" data-method="gcash">
                            <input type="radio" id="gcash" name="payment" value="gcash">
                            <label for="gcash">GCash</label>
                            <div class="reference-input" id="gcash-reference">
                                <div class="form-group">
                                    <label for="gcash-ref">GCash Reference Number</label>
                                    <input type="text" id="gcash-ref" class="form-control" placeholder="Enter reference number">
                                </div>
                            </div>
                        </div>
                        <div class="payment-option" data-method="paymaya">
                            <input type="radio" id="paymaya" name="payment" value="paymaya">
                            <label for="paymaya">PayMaya</label>
                            <div class="reference-input" id="paymaya-reference">
                                <div class="form-group">
                                    <label for="paymaya-ref">PayMaya Reference Number</label>
                                    <input type="text" id="paymaya-ref" class="form-control" placeholder="Enter reference number">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button class="btn checkout-btn" id="place-order-btn" style="margin-top: 2rem;">Place Order</button>
                    <button class="btn" id="back-to-cart" style="margin-top: 1rem; background: var(--gray);">Back to Cart</button>
                </div>

                <!-- Order Confirmation -->
                <div id="order-confirmation" class="customer-page checkout-page">
                    <div class="order-confirmation">
                        <div class="confirmation-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h2>Order Confirmed!</h2>
                        <p>Your order has been successfully placed.</p>
                        <div id="order-details">
                            <!-- Order details will be populated by JavaScript -->
                        </div>
                        <p style="margin-top: 1rem;">Thank you for choosing Luxora - Elite Fashion!</p>
                        <div style="margin-top: 1.5rem;">
                            <button class="btn checkout-btn" id="view-order-history" style="margin-right: 1rem;">View Order History</button>
                            <button class="btn" id="back-to-home">Back to Home</button>
                        </div>
                    </div>
                </div>
                
                <!-- Customer Orders -->
                <div id="customer-orders" class="customer-page">
                    <h2 class="section-title">Your Order History</h2>
                    <div id="order-history">
                        <!-- Order history will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Customer About Us -->
                <div id="customer-about" class="customer-page">
                    <h2 class="section-title">About Us</h2>
                    <div class="about-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);">
                        <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Story</h3>
                        <p>Luxora - Elite Fashion has been providing fashionable clothing and accessories since 2010. Our passion for style and quality drives us to curate unique collections that keep our customers coming back for more.</p>
                        <p>We believe in using only the finest materials, from our premium fabrics to our quality accessories. Every item is carefully selected with attention to detail.</p>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Values</h3>
                        <ul style="padding-left: 1.5rem;">
                            <li><strong>Quality:</strong> We never compromise on the quality of our materials or our products.</li>
                            <li><strong>Style:</strong> We're always following the latest fashion trends and combinations.</li>
                            <li><strong>Community:</strong> We're proud to be part of the local community and support local events.</li>
                            <li><strong>Sustainability:</strong> We're committed to environmentally friendly practices in our operations.</li>
                        </ul>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Team</h3>
                        <p>Our dedicated team of fashion experts and staff work tirelessly to ensure every item that leaves our store is perfect. From our experienced stylists to our friendly counter staff, everyone at Luxora - Elite Fashion is passionate about creating stylish moments for our customers.</p>
                    </div>
                </div>
                
                <!-- Customer Mission & Vision -->
                <div id="customer-mission" class="customer-page">
                    <h2 class="section-title">Our Mission & Vision</h2>
                    <div class="mission-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Mission</h3>
                                <p>To create moments of confidence by providing the most stylish, comfortable, and creative clothing while providing exceptional customer service and building strong community connections.</p>
                                <p>We believe that great fashion can boost anyone's confidence, and we're committed to making that experience accessible to everyone through:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Consistently high-quality products</li>
                                    <li>Trendsetting style combinations</li>
                                    <li>Friendly and efficient service</li>
                                    <li>Fair and transparent pricing</li>
                                </ul>
                            </div>
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Vision</h3>
                                <p>To become the most beloved clothing store in the region, known for our innovation, quality, and commitment to making every customer's style a little more confident.</p>
                                <p>We envision a future where:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Luxora - Elite Fashion is the first choice for fashion lovers</li>
                                    <li>Our brand represents excellence and creativity</li>
                                    <li>We've expanded to serve more communities</li>
                                    <li>We continue to innovate while staying true to our roots</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--secondary);">
                            <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Commitment</h3>
                            <p>At Luxora - Elite Fashion, we're committed to more than just selling great clothes. We're committed to:</p>
                            <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                <li><strong>Sustainability:</strong> Using eco-friendly packaging and reducing waste</li>
                                <li><strong>Community:</strong> Supporting local charities and events</li>
                                <li><strong>Innovation:</strong> Constantly developing new styles and products</li>
                                <li><strong>Quality:</strong> Never compromising on our high standards</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Staff Dashboard -->
    <div id="staff-dashboard" class="page">
        <div class="dashboard">
            <div class="sidebar" id="staff-sidebar">
                <h3>Staff Menu</h3>
                <ul>
                    <li><a href="#" class="sidebar-link active" data-page="staff-orders">Manage Orders</a></li>
                    <li><a href="#" class="sidebar-link" data-page="staff-about">About Us</a></li>
                    <li><a href="#" class="sidebar-link" data-page="staff-mission">Mission & Vision</a></li>
                </ul>
                <button class="logout-btn" id="staff-logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
            <div class="dashboard-content">
                <!-- Staff Orders -->
                <div id="staff-orders" class="staff-page active">
                    <div class="staff-header">
                        <h2 class="section-title">Order Management</h2>
                    </div>
                    <div class="table-container" style="overflow-x: auto;">
                        <table class="orders-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer Name</th>
                                    <th>Items</th>
                                    <th>Total</th>
                                    <th>Order Type</th>
                                    <th>Status</th>
                                    <th>Payment</th>
                                    <th>Reference No.</th>
                                    <th>Update Status</th>
                                </tr>
                            </thead>
                            <tbody id="staff-orders-table">
                                <!-- Orders will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Staff About Us -->
                <div id="staff-about" class="staff-page">
                    <h2 class="section-title">About Us</h2>
                    <div class="about-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);">
                        <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Story</h3>
                        <p>Luxora - Elite Fashion has been providing fashionable clothing and accessories since 2010. Our passion for style and quality drives us to curate unique collections that keep our customers coming back for more.</p>
                        <p>We believe in using only the finest materials, from our premium fabrics to our quality accessories. Every item is carefully selected with attention to detail.</p>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Values</h3>
                        <ul style="padding-left: 1.5rem;">
                            <li><strong>Quality:</strong> We never compromise on the quality of our materials or our products.</li>
                            <li><strong>Style:</strong> We're always following the latest fashion trends and combinations.</li>
                            <li><strong>Community:</strong> We're proud to be part of the local community and support local events.</li>
                            <li><strong>Sustainability:</strong> We're committed to environmentally friendly practices in our operations.</li>
                        </ul>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Team</h3>
                        <p>Our dedicated team of fashion experts and staff work tirelessly to ensure every item that leaves our store is perfect. From our experienced stylists to our friendly counter staff, everyone at Luxora - Elite Fashion is passionate about creating stylish moments for our customers.</p>
                    </div>
                </div>
                
                <!-- Staff Mission & Vision -->
                <div id="staff-mission" class="staff-page">
                    <h2 class="section-title">Our Mission & Vision</h2>
                    <div class="mission-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Mission</h3>
                                <p>To create moments of confidence by providing the most stylish, comfortable, and creative clothing while providing exceptional customer service and building strong community connections.</p>
                                <p>We believe that great fashion can boost anyone's confidence, and we're committed to making that experience accessible to everyone through:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Consistently high-quality products</li>
                                    <li>Trendsetting style combinations</li>
                                    <li>Friendly and efficient service</li>
                                    <li>Fair and transparent pricing</li>
                                </ul>
                            </div>
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Vision</h3>
                                <p>To become the most beloved clothing store in the region, known for our innovation, quality, and commitment to making every customer's style a little more confident.</p>
                                <p>We envision a future where:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Luxora - Elite Fashion is the first choice for fashion lovers</li>
                                    <li>Our brand represents excellence and creativity</li>
                                    <li>We've expanded to serve more communities</li>
                                    <li>We continue to innovate while staying true to our roots</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--secondary);">
                            <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Commitment</h3>
                            <p>At Luxora - Elite Fashion, we're committed to more than just selling great clothes. We're committed to:</p>
                            <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                <li><strong>Sustainability:</strong> Using eco-friendly packaging and reducing waste</li>
                                <li><strong>Community:</strong> Supporting local charities and events</li>
                                <li><strong>Innovation:</strong> Constantly developing new styles and products</li>
                                <li><strong>Quality:</strong> Never compromising on our high standards</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="admin-dashboard" class="page">
        <div class="dashboard">
            <div class="sidebar" id="admin-sidebar">
                <h3>Admin Menu</h3>
                <ul>
                    <li><a href="#" class="sidebar-link active" data-page="admin-overview">All Orders</a></li>
                    <li><a href="#" class="sidebar-link" data-page="admin-menu">Catalog Management</a></li>
                    <li><a href="#" class="sidebar-link" data-page="admin-users">User Management</a></li>
                    <li><a href="#" class="sidebar-link" data-page="admin-about">About Us</a></li>
                    <li><a href="#" class="sidebar-link" data-page="admin-mission">Mission & Vision</a></li>
                </ul>
                <button class="logout-btn" id="admin-logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
            <div class="dashboard-content">
                <!-- Admin Overview -->
                <div id="admin-overview" class="admin-page active">
                    <h2 class="section-title">All Orders</h2>
                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Items</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Parts</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="admin-orders-table">
                                <!-- Orders will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Admin Menu Management -->
                <div id="admin-menu" class="admin-page">
                    <h2 class="section-title">Catalog Management</h2>
                    <div class="admin-form">
                        <h3>Add New Clothing Item</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="item-name">Name</label>
                                <input type="text" id="item-name" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="item-price">Price</label>
                                <input type="number" id="item-price" class="form-control" step="0.01">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="item-description">Description</label>
                            <textarea id="item-description" class="form-control" rows="3"></textarea>
                        </div>
                        <div class="form-group image-upload">
                            <label for="item-image">Image</label>
                            <div class="file-upload">
                                <input type="file" id="item-image" accept="image/*">
                                <label for="item-image" class="file-upload-label">Choose Image</label>
                            </div>
                            <div class="image-preview" id="image-preview">
                                <span>Image Preview</span>
                            </div>
                        </div>
                        <button class="btn" id="add-menu-item">Add Item</button>
                    </div>
                    
                    <h3 class="section-title">Current Catalog Items</h3>
                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Price</th>
                                    <th>Image</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-menu-table">
                                <!-- Menu items will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Admin User Management -->
                <div id="admin-users" class="admin-page">
                    <h2 class="section-title">User Management</h2>
                    <div class="admin-form">
                        <h3>Add New User</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="user-username">Username</label>
                                <input type="text" id="user-username" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="user-email">Email</label>
                                <input type="email" id="user-email" class="form-control">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="user-password">Password</label>
                                <input type="password" id="user-password" class="form-control">
                                <div class="password-requirement">Password must be at least 8 characters and contain letters and numbers</div>
                                <div class="password-error" id="admin-password-error"></div>
                            </div>
                            <div class="form-group">
                                <label for="user-role">Role</label>
                                <select id="user-role" class="form-control">
                                    <option value="customer">Customer</option>
                                    <option value="staff">Staff</option>
                                    <option value="admin">Admin</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn" id="add-user">Add User</button>
                    </div>
                    
                    <h3 class="section-title">Current Users</h3>
                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Username</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-users-table">
                                <!-- Users will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Admin About Us -->
                <div id="admin-about" class="admin-page">
                    <h2 class="section-title">About Us</h2>
                    <div class="about-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);">
                        <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Story</h3>
                        <p>Luxora - Elite Fashion has been providing fashionable clothing and accessories since 2010. Our passion for style and quality drives us to curate unique collections that keep our customers coming back for more.</p>
                        <p>We believe in using only the finest materials, from our premium fabrics to our quality accessories. Every item is carefully selected with attention to detail.</p>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Values</h3>
                        <ul style="padding-left: 1.5rem;">
                            <li><strong>Quality:</strong> We never compromise on the quality of our materials or our products.</li>
                            <li><strong>Style:</strong> We're always following the latest fashion trends and combinations.</li>
                            <li><strong>Community:</strong> We're proud to be part of the local community and support local events.</li>
                            <li><strong>Sustainability:</strong> We're committed to environmentally friendly practices in our operations.</li>
                        </ul>
                        
                        <h3 style="color: var(--dark); margin-top: 2rem; margin-bottom: 1rem;">Our Team</h3>
                        <p>Our dedicated team of fashion experts and staff work tirelessly to ensure every item that leaves our store is perfect. From our experienced stylists to our friendly counter staff, everyone at Luxora - Elite Fashion is passionate about creating stylish moments for our customers.</p>
                    </div>
                </div>
                
                <!-- Admin Mission & Vision -->
                <div id="admin-mission" class="admin-page">
                    <h2 class="section-title">Our Mission & Vision</h2>
                    <div class="mission-content" style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(45, 45, 45, 0.1);">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Mission</h3>
                                <p>To create moments of confidence by providing the most stylish, comfortable, and creative clothing while providing exceptional customer service and building strong community connections.</p>
                                <p>We believe that great fashion can boost anyone's confidence, and we're committed to making that experience accessible to everyone through:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Consistently high-quality products</li>
                                    <li>Trendsetting style combinations</li>
                                    <li>Friendly and efficient service</li>
                                    <li>Fair and transparent pricing</li>
                                </ul>
                            </div>
                            <div>
                                <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Vision</h3>
                                <p>To become the most beloved clothing store in the region, known for our innovation, quality, and commitment to making every customer's style a little more confident.</p>
                                <p>We envision a future where:</p>
                                <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                    <li>Luxora - Elite Fashion is the first choice for fashion lovers</li>
                                    <li>Our brand represents excellence and creativity</li>
                                    <li>We've expanded to serve more communities</li>
                                    <li>We continue to innovate while staying true to our roots</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--secondary);">
                            <h3 style="color: var(--dark); margin-bottom: 1rem;">Our Commitment</h3>
                            <p>At Luxora - Elite Fashion, we're committed to more than just selling great clothes. We're committed to:</p>
                            <ul style="padding-left: 1.5rem; margin-top: 1rem;">
                                <li><strong>Sustainability:</strong> Using eco-friendly packaging and reducing waste</li>
                                <li><strong>Community:</strong> Supporting local charities and events</li>
                                <li><strong>Innovation:</strong> Constantly developing new styles and products</li>
                                <li><strong>Quality:</strong> Never compromising on our high standards</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Clothing items (20 items) - EASILY REPLACEABLE IMAGE LINKS
        let menuItems = [
            { id: 1, name: "Classic White T-Shirt", description: "Comfortable cotton t-shirt perfect for everyday wear", price: 350.00, image: "https://i.pinimg.com/1200x/b6/35/1d/b6351d9d05e7124c4c65c8a177194a1e.jpg" },
            { id: 2, name: "Denim Jacket", description: "Stylish denim jacket for a casual look", price: 1200.00, image: "https://i.pinimg.com/1200x/5e/c8/52/5ec85220e1ecf6f355f769957def8b6e.jpg" },
            { id: 3, name: "Summer Floral Dress", description: "Light and breezy floral dress perfect for summer", price: 850.00, image: "https://i.pinimg.com/736x/23/d8/13/23d81325756c291df55bc3f10f477b11.jpg" },
            { id: 4, name: "Slim Fit Jeans", description: "Comfortable slim fit jeans in classic blue", price: 950.00, image: "https://i.pinimg.com/736x/cf/c4/20/cfc420b30533f2f2457f144b690b1d10.jpg" },
            { id: 5, name: "Knit Sweater", description: "Warm and cozy knit sweater for chilly days", price: 1100.00, image: "https://i.pinimg.com/736x/95/76/7b/95767b7f46bdda5651d594b8d4ea5a0d.jpg" },
            { id: 6, name: "Leather Handbag", description: "Elegant leather handbag with multiple compartments", price: 1500.00, image: "https://i.pinimg.com/1200x/c7/01/f9/c701f9799cee891a9ba695398e7b2eb5.jpg" },
            { id: 7, name: "Running Shoes", description: "Comfortable running shoes with cushion technology", price: 1800.00, image: "https://i.pinimg.com/736x/0c/90/81/0c90813e13d13883a66354bb2d60a8dd.jpg" },
            { id: 8, name: "Formal Blazer", description: "Elegant blazer for business or formal occasions", price: 2200.00, image: "https://i.pinimg.com/1200x/32/6a/0f/326a0ff9d03b5e0ee00d13cea72766d6.jpg" },
            { id: 9, name: "Casual Sneakers", description: "Stylish sneakers for everyday casual wear", price: 1200.00, image: "https://i.pinimg.com/736x/83/f4/28/83f428eedb08f16219d652f8b93174a9.jpg" },
            { id: 10, name: "Summer Shorts", description: "Comfortable shorts perfect for warm weather", price: 550.00, image: "https://i.pinimg.com/1200x/f9/34/e1/f934e18967552ded6d02c480aeaa403d.jpg" },
            { id: 11, name: "Winter Coat", description: "Warm winter coat with insulation for cold days", price: 2800.00, image: "https://i.pinimg.com/736x/58/45/35/584535b28b8e0b351b0f6addc761d972.jpg" },
            { id: 12, name: "Evening Gown", description: "Elegant evening gown for special occasions", price: 3200.00, image: "https://i.pinimg.com/1200x/bc/2b/33/bc2b3333ffc291dd5ed0c73e66db2e56.jpg" },
            { id: 13, name: "Polo Shirt", description: "Classic polo shirt for casual or semi-formal wear", price: 650.00, image: "https://i.pinimg.com/1200x/b1/b4/7f/b1b47f33ed75383583951f65afa9d151.jpg" },
            { id: 14, name: "Yoga Pants", description: "Comfortable and stretchy yoga pants for active wear", price: 750.00, image: "https://i.pinimg.com/1200x/91/c5/60/91c560a0a0a56aa03d1cfc22e912b089.jpg" },
            { id: 15, name: "Leather Belt", description: "Genuine leather belt with classic buckle", price: 450.00, image: "https://i.pinimg.com/1200x/9d/24/09/9d24094d071bd0892f7eec388919d6e1.jpg" },
            { id: 16, name: "Baseball Cap", description: "Adjustable baseball cap with embroidered logo", price: 350.00, image: "https://i.pinimg.com/1200x/f2/3b/8b/f23b8bd3a7a0ec2a7f83d12cce11f12a.jpg" },
            { id: 17, name: "Silk Scarf", description: "Luxurious silk scarf with elegant pattern", price: 600.00, image: "https://i.pinimg.com/1200x/48/70/d5/4870d56f2f4062f62acfd34e8b7cac13.jpg" },
            { id: 18, name: "Wool Socks", description: "Warm wool socks for cold weather", price: 250.00, image: "https://i.pinimg.com/1200x/d7/4d/29/d74d294342e1f146f5ecb7575360697e.jpg" },
            { id: 19, name: "Swimwear Set", description: "Stylish swimwear set for beach or pool", price: 850.00, image: "https://i.pinimg.com/736x/69/f2/af/69f2af7dc91bf69eeee0ed352eb55dd1.jpg" },
            { id: 20, name: "Evening Clutch", description: "Elegant evening clutch for special events", price: 950.00, image: "https://i.pinimg.com/1200x/56/18/d5/5618d52cbb8f3358ce7cd7d07a492cc0.jpg" }
        ];

        // Sample orders for admin panel
        let orders = [
            { id: 6362, customer: "customer1", items: ["Classic White T-Shirt (x2)", "Denim Jacket (x1)"], total: 1900.00, status: "confirmed", date: "06/11/2025", orderType: "Delivery", paymentMethod: "GCash", referenceNumber: "GC123456789" },
            { id: 6670, customer: "customer1", items: ["Summer Floral Dress (x1)", "Slim Fit Jeans (x1)"], total: 1800.00, status: "completed", date: "06/11/2025", orderType: "Pickup", paymentMethod: "Cash", referenceNumber: "" },
            { id: 4802, customer: "alien", items: ["Knit Sweater (x1)"], total: 1100.00, status: "preparing", date: "06/11/2025", orderType: "Delivery", paymentMethod: "PayMaya", referenceNumber: "PM987654321" },
            { id: 4155, customer: "gsh", items: ["Leather Handbag (x1)"], total: 1500.00, status: "confirmed", date: "06/11/2025", orderType: "Pickup", paymentMethod: "Cash", referenceNumber: "" },
            { id: 8838, customer: "33", items: ["Running Shoes (x1)", "Formal Blazer (x1)"], total: 4000.00, status: "ready", date: "06/11/2025", orderType: "Delivery", paymentMethod: "GCash", referenceNumber: "GC555666777" },
            { id: 6455, customer: "ij", items: ["Casual Sneakers (x1)", "Summer Shorts (x1)"], total: 1750.00, status: "pickedup", date: "06/11/2025", orderType: "Pickup", paymentMethod: "Cash", referenceNumber: "" },
            { id: 9946, customer: "jul", items: ["Winter Coat (x1)"], total: 2800.00, status: "delivered", date: "06/11/2025", orderType: "Delivery", paymentMethod: "PayMaya", referenceNumber: "PM111222333" },
            { id: 2564, customer: "khhh", items: ["Evening Gown (x1)", "Polo Shirt (x1)"], total: 3850.00, status: "cancelled", date: "06/11/2025", orderType: "Pickup", paymentMethod: "Cash", referenceNumber: "" },
            { id: 1001, customer: "Juan Dela Cruz", items: ["Yoga Pants (x1)", "Leather Belt (x1)"], total: 1200.00, status: "failed", date: "06/11/2025", orderType: "Delivery", paymentMethod: "GCash", referenceNumber: "GC444555666" }
        ];

        // Sample users - MALAYA KANG MAGLAGAY NG KAHIT ANONG USERNAME AT PASSWORD NA 8+ CHARACTERS
        let users = [
            { id: 1, username: "customer1", email: "customer1@example.com", role: "Customer", password: "customer1" },
            { id: 2, username: "customer2", email: "customer2@example.com", role: "Customer", password: "customer2" },
            { id: 3, username: "staff", email: "staff@luxora.com", role: "Staff", password: "staff1234" },
            { id: 4, username: "admin", email: "admin@luxora.com", role: "Admin", password: "admin1234" }
        ];

        // Current user and cart
        let currentUser = null;
        let userRole = null;
        let cart = [];
        let selectedDeliveryMethod = "pickup";
        let selectedPaymentMethod = null;
        let selectedSize = null;

        // DOM Elements
        const pages = document.querySelectorAll('.page');
        const userTypes = document.querySelectorAll('.user-type');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const sidebarLinks = document.querySelectorAll('.sidebar-link');
        const customerPages = document.querySelectorAll('.customer-page');
        const staffPages = document.querySelectorAll('.staff-page');
        const adminPages = document.querySelectorAll('.admin-page');
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const sidebars = document.querySelectorAll('.sidebar');
        const addMenuItemBtn = document.getElementById('add-menu-item');
        const addUserBtn = document.getElementById('add-user');
        const headerCart = document.getElementById('header-cart');
        const navLinks = document.querySelectorAll('nav a');
        const toast = document.getElementById('toast');
        const showRegisterLink = document.getElementById('show-register');
        const showLoginLink = document.getElementById('show-login');
        const customerRegisterForm = document.getElementById('customer-register-form');
        const loginRegisterLink = document.getElementById('login-register-link');
        const checkoutBtn = document.getElementById('checkout-btn');
        const placeOrderBtn = document.getElementById('place-order-btn');
        const backToCartBtn = document.getElementById('back-to-cart');
        const backToHomeBtn = document.getElementById('back-to-home');
        const paymentOptions = document.querySelectorAll('.payment-option');
        const deliveryOptions = document.querySelectorAll('.delivery-option');
        const imagePreview = document.getElementById('image-preview');
        const itemImageInput = document.getElementById('item-image');
        const passwordError = document.getElementById('password-error');
        const adminPasswordError = document.getElementById('admin-password-error');
        const viewOrderHistoryBtn = document.getElementById('view-order-history');

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Start directly with login page
            showPage('login-page');

            // User type selection
            userTypes.forEach(type => {
                type.addEventListener('click', function() {
                    userTypes.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show/hide register form based on user type
                    const selectedType = this.dataset.type;
                    if (selectedType === 'customer') {
                        loginRegisterLink.style.display = 'block';
                    } else {
                        loginRegisterLink.style.display = 'none';
                        customerRegisterForm.classList.remove('active');
                        loginForm.style.display = 'block';
                    }
                });
            });

            // Show register form
            showRegisterLink.addEventListener('click', function(e) {
                e.preventDefault();
                customerRegisterForm.classList.add('active');
                loginForm.style.display = 'none';
                loginRegisterLink.style.display = 'none';
            });

            // Show login form
            showLoginLink.addEventListener('click', function(e) {
                e.preventDefault();
                customerRegisterForm.classList.remove('active');
                loginForm.style.display = 'block';
                loginRegisterLink.style.display = 'block';
            });

            // Password validation
            document.getElementById('reg-password').addEventListener('input', function() {
                validatePassword(this.value, passwordError);
            });

            // Admin password validation
            document.getElementById('user-password').addEventListener('input', function() {
                validatePassword(this.value, adminPasswordError);
            });

            // Login form submission
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const selectedType = document.querySelector('.user-type.active').dataset.type;
                
                if (authenticateUser(username, password, selectedType)) {
                    currentUser = username;
                    userRole = selectedType;
                    showDashboard(selectedType);
                    showToast('Login successful!', 'success');
                } else {
                    showToast('Invalid credentials. Please try again.', 'error');
                }
            });

            // Register form submission
            registerForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('reg-username').value;
                const email = document.getElementById('reg-email').value;
                const password = document.getElementById('reg-password').value;
                const confirmPassword = document.getElementById('reg-confirm-password').value;
                
                // Validate password
                if (!validatePassword(password, passwordError)) {
                    showToast('Please fix password requirements', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showToast('Passwords do not match', 'error');
                    return;
                }
                
                // Check if username already exists
                if (users.find(user => user.username === username)) {
                    showToast('Username already exists', 'error');
                    return;
                }
                
                // Create new customer account
                const newId = users.length > 0 ? Math.max(...users.map(user => user.id)) + 1 : 1;
                const newUser = {
                    id: newId,
                    username: username,
                    email: email,
                    role: 'Customer',
                    password: password
                };
                
                users.push(newUser);
                showToast('Account created successfully! Please login.', 'success');
                
                // Switch back to login form
                customerRegisterForm.classList.remove('active');
                loginForm.style.display = 'block';
                loginRegisterLink.style.display = 'block';
                
                // Clear form
                document.getElementById('reg-username').value = '';
                document.getElementById('reg-email').value = '';
                document.getElementById('reg-password').value = '';
                document.getElementById('reg-confirm-password').value = '';
                passwordError.textContent = '';
            });

            // Sidebar navigation
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetPage = this.dataset.page;
                    
                    // Update active link
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show target page
                    if (userRole === 'customer') {
                        customerPages.forEach(page => page.classList.remove('active'));
                        document.getElementById(targetPage).classList.add('active');
                        
                        // Load appropriate content
                        if (targetPage === 'customer-menu') {
                            loadFullMenu();
                        } else if (targetPage === 'customer-cart') {
                            loadCart();
                        } else if (targetPage === 'customer-orders') {
                            loadOrderHistory();
                        }
                    } else if (userRole === 'staff') {
                        staffPages.forEach(page => page.classList.remove('active'));
                        document.getElementById(targetPage).classList.add('active');
                        
                        // Load appropriate content
                        if (targetPage === 'staff-orders') {
                            loadStaffOrders();
                        }
                    } else if (userRole === 'admin') {
                        adminPages.forEach(page => page.classList.remove('active'));
                        document.getElementById(targetPage).classList.add('active');
                        
                        // Load appropriate content
                        if (targetPage === 'admin-menu') {
                            loadAdminMenu();
                        } else if (targetPage === 'admin-users') {
                            loadAdminUsers();
                        } else if (targetPage === 'admin-overview') {
                            loadAdminOrders();
                        }
                    }
                    
                    // Close mobile menu after selection
                    if (window.innerWidth <= 768) {
                        sidebars.forEach(sidebar => sidebar.classList.remove('active'));
                    }
                });
            });

            // Header navigation for customer
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetClass = this.classList[0];
                    
                    if (targetClass === 'nav-home') {
                        showCustomerPage('customer-home');
                    } else if (targetClass === 'nav-menu') {
                        showCustomerPage('customer-menu');
                        loadFullMenu();
                    } else if (targetClass === 'nav-about') {
                        showCustomerPage('customer-about');
                    } else if (targetClass === 'nav-mission') {
                        showCustomerPage('customer-mission');
                    }
                });
            });

            // Header cart button
            headerCart.addEventListener('click', function() {
                showCustomerPage('customer-cart');
                loadCart();
            });

            // Logout buttons
            document.getElementById('customer-logout').addEventListener('click', logout);
            document.getElementById('staff-logout').addEventListener('click', logout);
            document.getElementById('admin-logout').addEventListener('click', logout);
            document.getElementById('customer-header-logout').addEventListener('click', logout);

            // Checkout button
            checkoutBtn.addEventListener('click', function() {
                if (cart.length === 0) {
                    showToast('Your cart is empty. Add some clothing items first!', 'error');
                    return;
                }
                
                showCustomerPage('customer-checkout');
                loadCheckoutItems();
            });

            // Back to cart button
            backToCartBtn.addEventListener('click', function() {
                showCustomerPage('customer-cart');
            });

            // Back to home button
            backToHomeBtn.addEventListener('click', function() {
                showCustomerPage('customer-home');
            });

            // View Order History button
            viewOrderHistoryBtn.addEventListener('click', function() {
                // Navigate to order history page
                showCustomerPage('customer-orders');
                loadOrderHistory();
            });

            // Delivery option selection
            deliveryOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Unselect all options
                    deliveryOptions.forEach(opt => {
                        opt.classList.remove('selected');
                        opt.querySelector('input').checked = false;
                    });
                    
                    // Select current option
                    this.classList.add('selected');
                    this.querySelector('input').checked = true;
                    
                    // Update selected delivery method
                    selectedDeliveryMethod = this.dataset.method;
                    
                    // Update shipping fee
                    updateShippingFee();
                });
            });

            // Payment option selection
            paymentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Unselect all options
                    paymentOptions.forEach(opt => {
                        opt.classList.remove('selected');
                        opt.querySelector('input').checked = false;
                    });
                    
                    // Select current option
                    this.classList.add('selected');
                    this.querySelector('input').checked = true;
                    
                    // Update selected payment method
                    selectedPaymentMethod = this.dataset.method;
                    
                    // Hide all reference inputs
                    document.querySelectorAll('.reference-input').forEach(input => {
                        input.classList.remove('show');
                    });
                    
                    // Show reference input if needed
                    if (selectedPaymentMethod !== 'cash') {
                        document.getElementById(`${selectedPaymentMethod}-reference`).classList.add('show');
                    }
                });
            });

            // Place order button - AUTOMATICALLY clears cart and redirects to order history
            placeOrderBtn.addEventListener('click', function() {
                if (!selectedPaymentMethod) {
                    showToast('Please select a payment method', 'error');
                    return;
                }
                
                let referenceNumber = '';
                
                if (selectedPaymentMethod !== 'cash') {
                    referenceNumber = document.getElementById(`${selectedPaymentMethod}-ref`).value;
                    if (!referenceNumber) {
                        showToast('Please enter reference number', 'error');
                        return;
                    }
                }
                
                // Create a new order
                const orderId = Math.floor(1000 + Math.random() * 9000);
                const subtotal = calculateCartTotal();
                const shippingFee = selectedDeliveryMethod === 'pickup' ? 0 : 50.00;
                const orderTotal = subtotal + shippingFee;
                const orderItems = cart.map(item => `${item.name} (x${item.quantity})`);
                
                const newOrder = {
                    id: orderId,
                    customer: currentUser,
                    items: orderItems,
                    total: orderTotal,
                    status: 'confirmed',
                    date: new Date().toLocaleDateString(),
                    paymentMethod: selectedPaymentMethod,
                    referenceNumber: referenceNumber,
                    orderType: selectedDeliveryMethod === 'pickup' ? 'Pickup' : 'Delivery'
                };
                
                orders.push(newOrder);
                
                // AUTOMATICALLY clear cart after successful order
                cart = [];
                updateCartCount();
                
                // Show order confirmation
                showCustomerPage('order-confirmation');
                showOrderConfirmation(newOrder);
                
                // AUTOMATICALLY redirect to order history after 3 seconds
                setTimeout(() => {
                    showCustomerPage('customer-orders');
                    loadOrderHistory();
                    showToast('Your order has been added to your order history!', 'success');
                }, 3000);
                
                // Refresh staff orders view
                if (userRole === 'staff') {
                    loadStaffOrders();
                } else if (userRole === 'admin') {
                    loadAdminOrders();
                }
            });

            // Mobile menu toggle
            mobileMenuToggle.addEventListener('click', function() {
                const currentDashboard = document.querySelector('.dashboard');
                const currentSidebar = currentDashboard.querySelector('.sidebar');
                currentSidebar.classList.toggle('active');
            });

            // Admin functionality
            addMenuItemBtn.addEventListener('click', function() {
                const name = document.getElementById('item-name').value;
                const price = parseFloat(document.getElementById('item-price').value);
                const description = document.getElementById('item-description').value;
                const imageFile = document.getElementById('item-image').files[0];
                
                if (name && price && description) {
                    const newId = menuItems.length > 0 ? Math.max(...menuItems.map(item => item.id)) + 1 : 1;
                    
                    // Handle image upload
                    let imageUrl = "https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=700&q=80";
                    
                    if (imageFile) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            imageUrl = e.target.result;
                            const newItem = {
                                id: newId,
                                name: name,
                                price: price,
                                description: description,
                                image: imageUrl
                            };
                            
                            menuItems.push(newItem);
                            loadAdminMenu();
                            loadMenuItems();
                            loadFullMenu();
                            
                            // Clear form
                            document.getElementById('item-name').value = '';
                            document.getElementById('item-price').value = '';
                            document.getElementById('item-description').value = '';
                            document.getElementById('item-image').value = '';
                            imagePreview.innerHTML = '<span>Image Preview</span>';
                            
                            showToast('Clothing item added successfully!', 'success');
                        };
                        reader.readAsDataURL(imageFile);
                    } else {
                        const newItem = {
                            id: newId,
                            name: name,
                            price: price,
                            description: description,
                            image: imageUrl
                        };
                        
                        menuItems.push(newItem);
                        loadAdminMenu();
                        loadMenuItems();
                        loadFullMenu();
                        
                        // Clear form
                        document.getElementById('item-name').value = '';
                        document.getElementById('item-price').value = '';
                        document.getElementById('item-description').value = '';
                        document.getElementById('item-image').value = '';
                        imagePreview.innerHTML = '<span>Image Preview</span>';
                        
                        showToast('Clothing item added successfully!', 'success');
                    }
                } else {
                    showToast('Please fill in all fields', 'error');
                }
            });
            
            addUserBtn.addEventListener('click', function() {
                const username = document.getElementById('user-username').value;
                const email = document.getElementById('user-email').value;
                const password = document.getElementById('user-password').value;
                const role = document.getElementById('user-role').value;
                
                if (username && email && password && role) {
                    // Validate password for new users
                    if (!validatePassword(password, adminPasswordError)) {
                        showToast('Please fix password requirements', 'error');
                        return;
                    }
                    
                    const newId = users.length > 0 ? Math.max(...users.map(user => user.id)) + 1 : 1;
                    const newUser = {
                        id: newId,
                        username: username,
                        email: email,
                        role: role,
                        password: password
                    };
                    
                    users.push(newUser);
                    loadAdminUsers();
                    
                    // Clear form
                    document.getElementById('user-username').value = '';
                    document.getElementById('user-email').value = '';
                    document.getElementById('user-password').value = '';
                    
                    showToast('User added successfully!', 'success');
                } else {
                    showToast('Please fill in all fields', 'error');
                }
            });

            // Image preview for admin menu
            itemImageInput.addEventListener('change', function() {
                const file = this.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imagePreview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
                    };
                    reader.readAsDataURL(file);
                } else {
                    imagePreview.innerHTML = '<span>Image Preview</span>';
                }
            });

            // Load menu items on customer home page
            loadMenuItems();
        });

        // Functions
        function showPage(pageId) {
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        function showCustomerPage(pageId) {
            customerPages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            // Update sidebar active state
            sidebarLinks.forEach(link => link.classList.remove('active'));
            document.querySelector(`.sidebar-link[data-page="${pageId}"]`).classList.add('active');
        }

        function authenticateUser(username, password, type) {
            // For customers, check against registered users
            if (type === 'customer') {
                const user = users.find(u => u.username === username && u.role === 'Customer');
                return user && user.password === password;
            }
            
            // For staff and admin, check against registered users with password validation
            if (type === 'staff' || type === 'admin') {
                const user = users.find(u => u.username === username && u.role.toLowerCase() === type);
                return user && user.password === password;
            }
            
            return false;
        }

        function showDashboard(role) {
            pages.forEach(page => page.classList.remove('active'));
            
            if (role === 'customer') {
                document.getElementById('customer-header').classList.add('active');
                document.getElementById('customer-dashboard').classList.add('active');
                loadMenuItems();
            } else if (role === 'staff') {
                document.getElementById('staff-dashboard').classList.add('active');
                loadStaffOrders();
            } else if (role === 'admin') {
                document.getElementById('admin-dashboard').classList.add('active');
                loadAdminOrders();
            }
        }

        function logout() {
            currentUser = null;
            userRole = null;
            cart = [];
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById('login-page').classList.add('active');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            showToast('You have been logged out successfully.', 'success');
        }

        function showToast(message, type) {
            toast.textContent = message;
            toast.className = 'toast';
            
            if (type === 'success') {
                toast.style.background = 'var(--accent)';
            } else if (type === 'error') {
                toast.style.background = 'var(--primary)';
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function validatePassword(password, errorElement) {
            // Check if password is at least 8 characters
            if (password.length < 8) {
                errorElement.textContent = 'Password must be at least 8 characters';
                return false;
            }
            
            // Check if password contains only numbers
            if (/^\d+$/.test(password)) {
                errorElement.textContent = 'Password cannot contain only numbers';
                return false;
            }
            
            // Check if password contains at least one letter and one number
            if (!/(?=.*[a-zA-Z])(?=.*\d)/.test(password)) {
                errorElement.textContent = 'Password must contain both letters and numbers';
                return false;
            }
            
            errorElement.textContent = '';
            return true;
        }

        function loadMenuItems() {
            const menuContainer = document.getElementById('menu-items');
            menuContainer.innerHTML = '';
            
            menuItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'menu-item';
                itemElement.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="product-image-clickable" data-id="${item.id}">
                    <div class="menu-item-content">
                        <h3>${item.name}</h3>
                        <p>${item.description}</p>
                        <div class="menu-item-footer">
                            <span class="price">₱${item.price.toFixed(2)}</span>
                            <button class="add-to-cart" data-id="${item.id}">Add to Cart</button>
                        </div>
                    </div>
                `;
                menuContainer.appendChild(itemElement);
            });
            
            // Add event listeners to add to cart buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    addToCart(itemId);
                });
            });
            
            // Add event listeners to product images for click functionality
            document.querySelectorAll('.product-image-clickable').forEach(img => {
                img.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    showProductDetails(itemId);
                });
            });
        }

        function loadFullMenu() {
            const menuContainer = document.getElementById('menu-items-full');
            menuContainer.innerHTML = '';
            
            menuItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'menu-item';
                itemElement.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="product-image-clickable" data-id="${item.id}">
                    <div class="menu-item-content">
                        <h3>${item.name}</h3>
                        <p>${item.description}</p>
                        <div class="menu-item-footer">
                            <span class="price">₱${item.price.toFixed(2)}</span>
                            <button class="add-to-cart" data-id="${item.id}">Add to Cart</button>
                        </div>
                    </div>
                `;
                menuContainer.appendChild(itemElement);
            });
            
            // Add event listeners to add to cart buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    addToCart(itemId);
                });
            });
            
            // Add event listeners to product images for click functionality
            document.querySelectorAll('.product-image-clickable').forEach(img => {
                img.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    showProductDetails(itemId);
                });
            });
        }

        function showProductDetails(itemId) {
            const item = menuItems.find(i => i.id === itemId);
            if (item) {
                const detailsContainer = document.getElementById('product-details-container');
                detailsContainer.innerHTML = `
                    <div class="product-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <div class="product-info">
                        <h2>${item.name}</h2>
                        <div class="product-price">₱${item.price.toFixed(2)}</div>
                        <div class="product-description">
                            <p>${item.description}</p>
                            <p>This premium clothing item is made from high-quality materials and designed for comfort and style. Perfect for various occasions, it offers a perfect fit and exceptional durability.</p>
                        </div>
                        <div class="size-selector">
                            <h4>Select Size:</h4>
                            <div class="size-options">
                                <div class="size-option" data-size="S">S</div>
                                <div class="size-option" data-size="M">M</div>
                                <div class="size-option" data-size="L">L</div>
                                <div class="size-option" data-size="XL">XL</div>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="add-to-cart" data-id="${item.id}" style="padding: 0.75rem 1.5rem;">Add to Cart</button>
                            <button class="back-to-products">Back to Products</button>
                        </div>
                    </div>
                `;
                
                // Add event listeners to size options
                document.querySelectorAll('.size-option').forEach(option => {
                    option.addEventListener('click', function() {
                        document.querySelectorAll('.size-option').forEach(opt => opt.classList.remove('selected'));
                        this.classList.add('selected');
                        selectedSize = this.dataset.size;
                    });
                });
                
                // Add event listener to add to cart button in product details
                document.querySelector('.product-actions .add-to-cart').addEventListener('click', function() {
                    if (!selectedSize) {
                        showToast('Please select a size', 'error');
                        return;
                    }
                    addToCart(itemId, selectedSize);
                });
                
                // Add event listener to back button
                document.querySelector('.back-to-products').addEventListener('click', function() {
                    showCustomerPage('customer-menu');
                });
                
                // Show product details page
                showCustomerPage('product-details');
            }
        }

        function addToCart(itemId, size = null) {
            const item = menuItems.find(i => i.id === itemId);
            const existingItem = cart.find(i => i.id === itemId && i.size === size);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    image: item.image,
                    quantity: 1,
                    size: size
                });
            }
            
            updateCartCount();
            showToast(`${item.name} ${size ? `(Size: ${size})` : ''} added to cart!`, 'success');
            
            // Add animation to the cart icon
            const cartIcon = document.querySelector('.cart-icon');
            cartIcon.classList.add('add-to-cart-animation');
            setTimeout(() => {
                cartIcon.classList.remove('add-to-cart-animation');
            }, 500);
        }

        function updateCartCount() {
            const cartCount = cart.reduce((count, item) => count + item.quantity, 0);
            document.querySelector('.cart-count').textContent = cartCount;
        }

        function loadCart() {
            const cartContainer = document.getElementById('cart-items');
            cartContainer.innerHTML = '';
            
            if (cart.length === 0) {
                cartContainer.innerHTML = '<p>Your cart is empty. Add some stylish clothing items!</p>';
                document.getElementById('cart-subtotal').textContent = '₱0.00';
                document.getElementById('shipping-fee').textContent = '₱0.00';
                document.getElementById('cart-total').textContent = '₱0.00';
                return;
            }
            
            cart.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <div class="cart-item-details">
                        <img src="${item.image}" alt="${item.name}">
                        <div class="cart-item-info">
                            <h4>${item.name}</h4>
                            <p>₱${item.price.toFixed(2)} each</p>
                            ${item.size ? `<p>Size: ${item.size}</p>` : ''}
                        </div>
                    </div>
                    <div class="cart-item-controls">
                        <div class="quantity-control">
                            <button class="quantity-btn decrease" data-id="${item.id}" data-size="${item.size || ''}">-</button>
                            <span>${item.quantity}</span>
                            <button class="quantity-btn increase" data-id="${item.id}" data-size="${item.size || ''}">+</button>
                        </div>
                        <span class="price">₱${(item.price * item.quantity).toFixed(2)}</span>
                        <button class="remove-btn" data-id="${item.id}" data-size="${item.size || ''}"><i class="fas fa-trash"></i> Remove</button>
                    </div>
                `;
                cartContainer.appendChild(itemElement);
            });
            
            // Add event listeners to quantity controls
            document.querySelectorAll('.decrease').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    const size = this.dataset.size || null;
                    updateCartItemQuantity(itemId, -1, size);
                });
            });
            
            document.querySelectorAll('.increase').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    const size = this.dataset.size || null;
                    updateCartItemQuantity(itemId, 1, size);
                });
            });
            
            document.querySelectorAll('.remove-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = parseInt(this.dataset.id);
                    const size = this.dataset.size || null;
                    removeFromCart(itemId, size);
                });
            });
            
            updateCartTotals();
        }

        function updateCartItemQuantity(itemId, change, size = null) {
            const item = cart.find(i => i.id === itemId && i.size === size);
            if (item) {
                item.quantity += change;
                
                if (item.quantity <= 0) {
                    removeFromCart(itemId, size);
                } else {
                    loadCart();
                    updateCartCount();
                }
            }
        }

        function removeFromCart(itemId, size = null) {
            const item = cart.find(i => i.id === itemId && i.size === size);
            cart = cart.filter(item => !(item.id === itemId && item.size === size));
            loadCart();
            updateCartCount();
            showToast(`${item.name} removed from cart.`, 'success');
        }

        function updateCartTotals() {
            const subtotal = calculateCartTotal();
            const shipping = selectedDeliveryMethod === 'pickup' ? 0 : 50.00;
            const total = subtotal + shipping;
            
            document.getElementById('cart-subtotal').textContent = `₱${subtotal.toFixed(2)}`;
            document.getElementById('shipping-fee').textContent = `₱${shipping.toFixed(2)}`;
            document.getElementById('cart-total').textContent = `₱${total.toFixed(2)}`;
        }

        function updateShippingFee() {
            const shipping = selectedDeliveryMethod === 'pickup' ? 0 : 50.00;
            const subtotal = calculateCartTotal();
            const total = subtotal + shipping;
            
            document.getElementById('cart-subtotal').textContent = `₱${subtotal.toFixed(2)}`;
            document.getElementById('shipping-fee').textContent = `₱${shipping.toFixed(2)}`;
            document.getElementById('cart-total').textContent = `₱${total.toFixed(2)}`;
            
            // Update checkout page
            document.getElementById('checkout-shipping').textContent = `₱${shipping.toFixed(2)}`;
            document.getElementById('checkout-total').textContent = `₱${total.toFixed(2)}`;
        }

        function calculateCartTotal() {
            return cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        }

        function loadCheckoutItems() {
            const checkoutContainer = document.getElementById('checkout-items');
            checkoutContainer.innerHTML = '';
            
            if (cart.length === 0) {
                checkoutContainer.innerHTML = '<p>Your cart is empty.</p>';
                return;
            }
            
            cart.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <div class="cart-item-details">
                        <img src="${item.image}" alt="${item.name}" style="width: 60px; height: 60px;">
                        <div class="cart-item-info">
                            <h4>${item.name}</h4>
                            <p>Quantity: ${item.quantity}</p>
                            ${item.size ? `<p>Size: ${item.size}</p>` : ''}
                        </div>
                    </div>
                    <div class="price">₱${(item.price * item.quantity).toFixed(2)}</div>
                `;
                checkoutContainer.appendChild(itemElement);
            });
            
            const subtotal = calculateCartTotal();
            const shipping = selectedDeliveryMethod === 'pickup' ? 0 : 50.00;
            const total = subtotal + shipping;
            
            document.getElementById('checkout-subtotal').textContent = `₱${subtotal.toFixed(2)}`;
            document.getElementById('checkout-shipping').textContent = `₱${shipping.toFixed(2)}`;
            document.getElementById('checkout-total').textContent = `₱${total.toFixed(2)}`;
        }

        function showOrderConfirmation(order) {
            const orderDetails = document.getElementById('order-details');
            orderDetails.innerHTML = `
                <p><strong>Order ID:</strong> #${order.id}</p>
                <p><strong>Total Amount:</strong> ₱${order.total.toFixed(2)}</p>
                <p><strong>Order Type:</strong> ${order.orderType}</p>
                <p><strong>Payment Method:</strong> ${order.paymentMethod.charAt(0).toUpperCase() + order.paymentMethod.slice(1)}</p>
                ${order.referenceNumber ? `<p><strong>Reference Number:</strong> ${order.referenceNumber}</p>` : ''}
                <p><strong>Estimated ${order.orderType === 'Pickup' ? 'Pickup' : 'Delivery'}:</strong> ${order.orderType === 'Pickup' ? '15-20 minutes' : '30-45 minutes'}</p>
            `;
        }

        function loadOrderHistory() {
            const orderContainer = document.getElementById('order-history');
            orderContainer.innerHTML = '';
            
            const userOrders = orders.filter(order => order.customer === currentUser);
            
            if (userOrders.length === 0) {
                orderContainer.innerHTML = '<p>You have no order history yet.</p>';
                return;
            }
            
            userOrders.forEach(order => {
                const orderElement = document.createElement('div');
                orderElement.className = 'order-card';
                
                let statusClass = '';
                if (order.status === 'confirmed') statusClass = 'status-confirmed';
                if (order.status === 'preparing') statusClass = 'status-preparing';
                if (order.status === 'ready') statusClass = 'status-ready';
                if (order.status === 'pickedup') statusClass = 'status-pickedup';
                if (order.status === 'delivered') statusClass = 'status-delivered';
                if (order.status === 'completed') statusClass = 'status-completed';
                if (order.status === 'cancelled') statusClass = 'status-cancelled';
                if (order.status === 'failed') statusClass = 'status-failed';
                
                orderElement.innerHTML = `
                    <div class="order-header">
                        <div>
                            <h3>Order #${order.id}</h3>
                            <p>Placed on ${order.date}</p>
                            <p>Order Type: ${order.orderType}</p>
                            <p>Payment: ${order.paymentMethod.charAt(0).toUpperCase() + order.paymentMethod.slice(1)}</p>
                            ${order.referenceNumber ? `<p>Reference: ${order.referenceNumber}</p>` : ''}
                        </div>
                        <div class="order-status ${statusClass}">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</div>
                    </div>
                    <div class="order-items">
                        ${order.items.map(item => `
                            <div class="order-item">
                                <span>${item}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="order-total">
                        <strong>Total: ₱${order.total.toFixed(2)}</strong>
                    </div>
                    ${createOrderTracking(order)}
                `;
                orderContainer.appendChild(orderElement);
            });
        }

        function createOrderTracking(order) {
            const steps = [
                { id: 'confirmed', label: 'Confirmed', icon: 'fas fa-check' },
                { id: 'preparing', label: 'Preparing', icon: 'fas fa-utensils' },
                { id: 'ready', label: 'Ready', icon: 'fas fa-box' },
                { id: order.orderType === 'Pickup' ? 'pickedup' : 'delivered', label: order.orderType === 'Pickup' ? 'Picked Up' : 'On the Way', icon: order.orderType === 'Pickup' ? 'fas fa-store' : 'fas fa-truck' },
                { id: 'completed', label: 'Completed', icon: 'fas fa-clipboard-check' }
            ];
            
            // For cancelled or failed orders, we show a different tracking
            if (order.status === 'cancelled' || order.status === 'failed') {
                return `
                    <div class="order-tracking">
                        <div class="tracking-header">
                            <div class="tracking-title">Order Status</div>
                        </div>
                        <div class="tracking-info">
                            <div class="tracking-message">
                                <i class="fas fa-exclamation-triangle" style="color: #dc3545; margin-right: 0.5rem;"></i>
                                Your order has been ${order.status}.
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // Find the current step index
            let currentStepIndex = steps.findIndex(step => step.id === order.status);
            
            // For delivered status, we need to check if it's pickup or delivery
            if (order.status === 'delivered') {
                currentStepIndex = steps.findIndex(step => step.id === 'delivered');
            }
            
            // For pickedup status, we need to check if it's pickup or delivery
            if (order.status === 'pickedup') {
                currentStepIndex = steps.findIndex(step => step.id === 'pickedup');
            }
            
            // For completed status, we need to set the current step to the last one
            if (order.status === 'completed') {
                currentStepIndex = steps.length - 1;
            }
            
            // Create the tracking steps HTML
            let stepsHTML = '';
            steps.forEach((step, index) => {
                let stepClass = '';
                if (index < currentStepIndex) {
                    stepClass = 'step-completed';
                } else if (index === currentStepIndex) {
                    stepClass = 'step-active';
                }
                
                stepsHTML += `
                    <div class="tracking-step ${stepClass}">
                        <div class="step-icon">
                            <i class="${step.icon}"></i>
                        </div>
                        <div class="step-label">${step.label}</div>
                    </div>
                `;
            });
            
            // Create tracking message based on current status
            let trackingMessage = '';
            let estimatedTime = '';
            
            switch(order.status) {
                case 'confirmed':
                    trackingMessage = 'Your order has been confirmed and is being processed.';
                    estimatedTime = order.orderType === 'Pickup' ? 
                        'Estimated pickup time: 15-20 minutes' : 
                        'Estimated delivery time: 30-45 minutes';
                    break;
                case 'preparing':
                    trackingMessage = 'We are preparing your stylish clothing items.';
                    estimatedTime = order.orderType === 'Pickup' ? 
                        'Estimated pickup time: 10-15 minutes' : 
                        'Estimated delivery time: 20-30 minutes';
                    break;
                case 'ready':
                    if (order.orderType === 'Pickup') {
                        trackingMessage = 'Your order is ready for pickup at our store.';
                        estimatedTime = 'Please come to our store to collect your order.';
                    } else {
                        trackingMessage = 'Your order is ready and will be dispatched soon.';
                        estimatedTime = 'Estimated delivery time: 15-25 minutes';
                    }
                    break;
                case 'pickedup':
                    trackingMessage = 'Your order has been picked up. Thank you for your order!';
                    break;
                case 'delivered':
                    trackingMessage = 'Your order is on the way to your location.';
                    estimatedTime = 'Estimated arrival: 10-15 minutes';
                    break;
                case 'completed':
                    trackingMessage = 'Your order has been successfully completed. Thank you for choosing Luxora - Elite Fashion!';
                    break;
                default:
                    trackingMessage = 'Your order is being processed.';
            }
            
            return `
                <div class="order-tracking">
                    <div class="tracking-header">
                        <div class="tracking-title">Order Status</div>
                    </div>
                    <div class="tracking-steps">
                        ${stepsHTML}
                    </div>
                    <div class="tracking-info">
                        <div class="tracking-message">${trackingMessage}</div>
                        ${estimatedTime ? `<div class="estimated-time">${estimatedTime}</div>` : ''}
                    </div>
                </div>
            `;
        }

        function loadStaffOrders() {
            const ordersTable = document.getElementById('staff-orders-table');
            ordersTable.innerHTML = '';
            
            orders.forEach(order => {
                const row = document.createElement('tr');
                
                let statusButtons = '';
                if (order.status === 'confirmed') {
                    statusButtons = `
                        <button class="action-btn btn-preparing" data-id="${order.id}">Preparing</button>
                        <button class="action-btn btn-cancelled" data-id="${order.id}">Cancel</button>
                    `;
                } else if (order.status === 'preparing') {
                    statusButtons = `
                        <button class="action-btn btn-ready" data-id="${order.id}">Ready</button>
                        <button class="action-btn btn-cancelled" data-id="${order.id}">Cancel</button>
                    `;
                } else if (order.status === 'ready') {
                    if (order.orderType === 'Pickup') {
                        statusButtons = `
                            <button class="action-btn btn-pickedup" data-id="${order.id}">Picked Up</button>
                            `;
                    } else {
                        statusButtons = `
                            <button class="action-btn btn-delivered" data-id="${order.id}">On the Way</button>
                            `;
                    }
                } else if (order.status === 'pickedup') {
                    statusButtons = `
                        <button class="action-btn btn-completed" data-id="${order.id}">Completed</button>
                    `;
                } else if (order.status === 'delivered') {
                    statusButtons = `
                        <button class="action-btn btn-completed" data-id="${order.id}">Completed</button>
                        <button class="action-btn btn-failed" data-id="${order.id}">Failed</button>
                    `;
                } else if (order.status === 'completed' || order.status === 'cancelled' || order.status === 'failed') {
                    statusButtons = '<span>Order Finalized</span>';
                }
                
                row.innerHTML = `
                    <td>#${order.id}</td>
                    <td>${order.customer}</td>
                    <td>${order.items.join(', ')}</td>
                    <td>₱${order.total.toFixed(2)}</td>
                    <td>${order.orderType}</td>
                    <td>${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</td>
                    <td>${order.paymentMethod}</td>
                    <td>${order.referenceNumber || 'N/A'}</td>
                    <td>${statusButtons}</td>
                `;
                ordersTable.appendChild(row);
            });
            
            // Add event listeners to action buttons
            document.querySelectorAll('.btn-confirmed').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'confirmed');
                });
            });
            
            document.querySelectorAll('.btn-preparing').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'preparing');
                });
            });
            
            document.querySelectorAll('.btn-ready').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'ready');
                });
            });
            
            document.querySelectorAll('.btn-pickedup').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'pickedup');
                });
            });
            
            document.querySelectorAll('.btn-delivered').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'delivered');
                });
            });
            
            document.querySelectorAll('.btn-completed').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'completed');
                });
            });
            
            document.querySelectorAll('.btn-cancelled').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'cancelled');
                });
            });
            
            document.querySelectorAll('.btn-failed').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.dataset.id);
                    updateOrderStatus(orderId, 'failed');
                });
            });
        }

        function updateOrderStatus(orderId, newStatus) {
            // Update in orders
            const order = orders.find(order => order.id === orderId);
            if (order) {
                order.status = newStatus;
            }
            
            // Reload the orders table
            loadStaffOrders();
            
            // If admin is logged in, refresh their view too
            if (userRole === 'admin') {
                loadAdminOrders();
            }
            
            // If customer is logged in and this is their order, refresh their order history
            // This is the key fix - always refresh the customer's order history when their order status changes
            if (currentUser && order && order.customer === currentUser) {
                // If customer is currently viewing their order history, refresh it
                if (document.getElementById('customer-orders').classList.contains('active')) {
                    loadOrderHistory();
                }
                // Show a notification to the customer
                showToast(`Your order #${orderId} status has been updated to ${newStatus}.`, 'success');
            }
            
            showToast(`Order #${orderId} status updated to ${newStatus}.`, 'success');
        }

        function loadAdminOrders() {
            const ordersTable = document.getElementById('admin-orders-table');
            ordersTable.innerHTML = '';
            
            orders.forEach(order => {
                const row = document.createElement('tr');
                
                let statusClass = '';
                if (order.status === 'confirmed') statusClass = 'status-confirmed';
                if (order.status === 'preparing') statusClass = 'status-preparing';
                if (order.status === 'ready') statusClass = 'status-ready';
                if (order.status === 'pickedup') statusClass = 'status-pickedup';
                if (order.status === 'delivered') statusClass = 'status-delivered';
                if (order.status === 'completed') statusClass = 'status-completed';
                if (order.status === 'cancelled') statusClass = 'status-cancelled';
                if (order.status === 'failed') statusClass = 'status-failed';
                
                row.innerHTML = `
                    <td>#${order.id}</td>
                    <td>${order.customer}</td>
                    <td>${order.items.join(', ')}</td>
                    <td>₱${order.total.toFixed(2)}</td>
                    <td><span class="order-status ${statusClass}">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span></td>
                    <td>✔</td>
                    <td>${order.date}</td>
                `;
                ordersTable.appendChild(row);
            });
        }

        function loadAdminMenu() {
            const menuTable = document.getElementById('admin-menu-table');
            menuTable.innerHTML = '';
            
            menuItems.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.name}</td>
                    <td>${item.description}</td>
                    <td>₱${item.price.toFixed(2)}</td>
                    <td><img src="${item.image}" alt="${item.name}" style="width: 50px; height: 50px; object-fit: cover;"></td>
                    <td>
                        <button class="action-btn" onclick="editMenuItem(${item.id})">Edit</button>
                        <button class="action-btn" style="background: #f8d7da; color: #721c24;" onclick="deleteMenuItem(${item.id})">Delete</button>
                    </td>
                `;
                menuTable.appendChild(row);
            });
        }

        function loadAdminUsers() {
            const usersTable = document.getElementById('admin-users-table');
            usersTable.innerHTML = '';
            
            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.username}</td>
                    <td>${user.email}</td>
                    <td>${user.role}</td>
                    <td>
                        <button class="action-btn" onclick="editUser(${user.id})">Edit</button>
                        <button class="action-btn" style="background: #f8d7da; color: #721c24;" onclick="deleteUser(${user.id})">Delete</button>
                    </td>
                `;
                usersTable.appendChild(row);
            });
        }

        // Admin functions
        function editMenuItem(id) {
            const item = menuItems.find(i => i.id === id);
            if (item) {
                document.getElementById('item-name').value = item.name;
                document.getElementById('item-price').value = item.price;
                document.getElementById('item-description').value = item.description;
                imagePreview.innerHTML = `<img src="${item.image}" alt="Preview">`;
                
                // Change button to update
                const addBtn = document.getElementById('add-menu-item');
                addBtn.textContent = 'Update Item';
                addBtn.onclick = function() {
                    updateMenuItem(id);
                };
            }
        }

        function updateMenuItem(id) {
            const name = document.getElementById('item-name').value;
            const price = parseFloat(document.getElementById('item-price').value);
            const description = document.getElementById('item-description').value;
            const imageFile = document.getElementById('item-image').files[0];
            
            if (name && price && description) {
                const itemIndex = menuItems.findIndex(i => i.id === id);
                if (itemIndex !== -1) {
                    // Handle image update
                    if (imageFile) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            menuItems[itemIndex].image = e.target.result;
                            menuItems[itemIndex].name = name;
                            menuItems[itemIndex].price = price;
                            menuItems[itemIndex].description = description;
                            
                            loadAdminMenu();
                            loadMenuItems();
                            loadFullMenu();
                            
                            // Reset form and button
                            document.getElementById('item-name').value = '';
                            document.getElementById('item-price').value = '';
                            document.getElementById('item-description').value = '';
                            document.getElementById('item-image').value = '';
                            imagePreview.innerHTML = '<span>Image Preview</span>';
                            
                            const addBtn = document.getElementById('add-menu-item');
                            addBtn.textContent = 'Add Item';
                            addBtn.onclick = function() {
                                const name = document.getElementById('item-name').value;
                                const price = parseFloat(document.getElementById('item-price').value);
                                const description = document.getElementById('item-description').value;
                                const imageFile = document.getElementById('item-image').files[0];
                                
                                if (name && price && description) {
                                    const newId = menuItems.length > 0 ? Math.max(...menuItems.map(item => item.id)) + 1 : 1;
                                    
                                    // Handle image upload
                                    let imageUrl = "https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=700&q=80";
                                    
                                    if (imageFile) {
                                        const reader = new FileReader();
                                        reader.onload = function(e) {
                                            imageUrl = e.target.result;
                                            const newItem = {
                                                id: newId,
                                                name: name,
                                                price: price,
                                                description: description,
                                                image: imageUrl
                                            };
                                            
                                            menuItems.push(newItem);
                                            loadAdminMenu();
                                            loadMenuItems();
                                            loadFullMenu();
                                            
                                            // Clear form
                                            document.getElementById('item-name').value = '';
                                            document.getElementById('item-price').value = '';
                                            document.getElementById('item-description').value = '';
                                            document.getElementById('item-image').value = '';
                                            imagePreview.innerHTML = '<span>Image Preview</span>';
                                            
                                            showToast('Clothing item added successfully!', 'success');
                                        };
                                        reader.readAsDataURL(imageFile);
                                    } else {
                                        const newItem = {
                                            id: newId,
                                            name: name,
                                            price: price,
                                            description: description,
                                            image: imageUrl
                                        };
                                        
                                        menuItems.push(newItem);
                                        loadAdminMenu();
                                        loadMenuItems();
                                        loadFullMenu();
                                        
                                        // Clear form
                                        document.getElementById('item-name').value = '';
                                        document.getElementById('item-price').value = '';
                                        document.getElementById('item-description').value = '';
                                        document.getElementById('item-image').value = '';
                                        imagePreview.innerHTML = '<span>Image Preview</span>';
                                        
                                        showToast('Clothing item added successfully!', 'success');
                                    }
                                } else {
                                    showToast('Please fill in all fields', 'error');
                                }
                            };
                            
                            showToast('Clothing item updated successfully!', 'success');
                        };
                        reader.readAsDataURL(imageFile);
                    } else {
                        menuItems[itemIndex].name = name;
                        menuItems[itemIndex].price = price;
                        menuItems[itemIndex].description = description;
                        
                        loadAdminMenu();
                        loadMenuItems();
                        loadFullMenu();
                        
                        // Reset form and button
                        document.getElementById('item-name').value = '';
                        document.getElementById('item-price').value = '';
                        document.getElementById('item-description').value = '';
                        document.getElementById('item-image').value = '';
                        imagePreview.innerHTML = '<span>Image Preview</span>';
                        
                        const addBtn = document.getElementById('add-menu-item');
                        addBtn.textContent = 'Add Item';
                        addBtn.onclick = function() {
                            const name = document.getElementById('item-name').value;
                            const price = parseFloat(document.getElementById('item-price').value);
                            const description = document.getElementById('item-description').value;
                            const imageFile = document.getElementById('item-image').files[0];
                            
                            if (name && price && description) {
                                const newId = menuItems.length > 0 ? Math.max(...menuItems.map(item => item.id)) + 1 : 1;
                                
                                // Handle image upload
                                let imageUrl = "https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=700&q=80";
                                
                                if (imageFile) {
                                    const reader = new FileReader();
                                    reader.onload = function(e) {
                                        imageUrl = e.target.result;
                                        const newItem = {
                                            id: newId,
                                            name: name,
                                            price: price,
                                            description: description,
                                            image: imageUrl
                                        };
                                        
                                        menuItems.push(newItem);
                                        loadAdminMenu();
                                        loadMenuItems();
                                        loadFullMenu();
                                        
                                        // Clear form
                                        document.getElementById('item-name').value = '';
                                        document.getElementById('item-price').value = '';
                                        document.getElementById('item-description').value = '';
                                        document.getElementById('item-image').value = '';
                                        imagePreview.innerHTML = '<span>Image Preview</span>';
                                        
                                        showToast('Clothing item added successfully!', 'success');
                                    };
                                    reader.readAsDataURL(imageFile);
                                } else {
                                    const newItem = {
                                        id: newId,
                                        name: name,
                                        price: price,
                                        description: description,
                                        image: imageUrl
                                    };
                                    
                                    menuItems.push(newItem);
                                    loadAdminMenu();
                                    loadMenuItems();
                                    loadFullMenu();
                                    
                                    // Clear form
                                    document.getElementById('item-name').value = '';
                                    document.getElementById('item-price').value = '';
                                    document.getElementById('item-description').value = '';
                                    document.getElementById('item-image').value = '';
                                    imagePreview.innerHTML = '<span>Image Preview</span>';
                                    
                                    showToast('Clothing item added successfully!', 'success');
                                }
                            } else {
                                showToast('Please fill in all fields', 'error');
                            }
                        };
                        
                        showToast('Clothing item updated successfully!', 'success');
                    }
                }
            } else {
                showToast('Please fill in all fields', 'error');
            }
        }

        function deleteMenuItem(id) {
            if (confirm('Are you sure you want to delete this clothing item?')) {
                menuItems = menuItems.filter(item => item.id !== id);
                loadAdminMenu();
                loadMenuItems();
                loadFullMenu();
                showToast('Clothing item deleted successfully!', 'success');
            }
        }

        function editUser(id) {
            const user = users.find(u => u.id === id);
            if (user) {
                document.getElementById('user-username').value = user.username;
                document.getElementById('user-email').value = user.email;
                document.getElementById('user-role').value = user.role.toLowerCase();
                
                // Change button to update
                const addBtn = document.getElementById('add-user');
                addBtn.textContent = 'Update User';
                addBtn.onclick = function() {
                    updateUser(id);
                };
            }
        }

        function updateUser(id) {
            const username = document.getElementById('user-username').value;
            const email = document.getElementById('user-email').value;
            const role = document.getElementById('user-role').value;
            
            if (username && email && role) {
                const userIndex = users.findIndex(u => u.id === id);
                if (userIndex !== -1) {
                    users[userIndex].username = username;
                    users[userIndex].email = email;
                    users[userIndex].role = role;
                    
                    loadAdminUsers();
                    
                    // Reset form and button
                    document.getElementById('user-username').value = '';
                    document.getElementById('user-email').value = '';
                    document.getElementById('user-password').value = '';
                    
                    const addBtn = document.getElementById('add-user');
                    addBtn.textContent = 'Add User';
                    addBtn.onclick = function() {
                        const username = document.getElementById('user-username').value;
                        const email = document.getElementById('user-email').value;
                        const password = document.getElementById('user-password').value;
                        const role = document.getElementById('user-role').value;
                        
                        if (username && email && password && role) {
                            // Validate password for new users
                            if (!validatePassword(password, adminPasswordError)) {
                                showToast('Please fix password requirements', 'error');
                                return;
                            }
                            
                            const newId = users.length > 0 ? Math.max(...users.map(user => user.id)) + 1 : 1;
                            const newUser = {
                                id: newId,
                                username: username,
                                email: email,
                                role: role,
                                password: password
                            };
                            
                            users.push(newUser);
                            loadAdminUsers();
                            
                            // Clear form
                            document.getElementById('user-username').value = '';
                            document.getElementById('user-email').value = '';
                            document.getElementById('user-password').value = '';
                            
                            showToast('User added successfully!', 'success');
                        } else {
                            showToast('Please fill in all fields', 'error');
                        }
                    };
                    
                    showToast('User updated successfully!', 'success');
                }
            } else {
                showToast('Please fill in all fields', 'error');
            }
        }

        function deleteUser(id) {
            if (confirm('Are you sure you want to delete this user?')) {
                users = users.filter(user => user.id !== id);
                loadAdminUsers();
                showToast('User deleted successfully!', 'success');
            }
        }
    </script>
</body>
</html>